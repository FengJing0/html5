webpackJsonp([4],{515:function(t,e,n){function a(t){n(699)}var i=n(76)(n(672),n(712),a,null,null);t.exports=i.exports},521:function(t,e,n){function a(t){n(524)}var i=n(76)(n(522),n(525),a,null,null);t.exports=i.exports},522:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{headers:{},items:{},actionsVisible:{default:!0},editBtnVisible:{default:!0},removeBtnVisible:{default:!0}},data:function(){return{sortBy:null,sortOrder:null}},methods:{sort:function(t){if(!1!==t.sortAble){var e=this.sortBy,n=this.sortOrder;t.value===e?this.sortOrder="desc"===n?"asc":"desc":(this.sortBy=t.value,this.sortOrder="desc"),this.items.sort(function(e,n){var a=e[t.value],i=n[t.value];return a<i?-1:a===i?0:1}),"desc"===this.sortOrder&&this.items.reverse()}},sortClass:function(t){if(!1===t.sortAble)return"";var e=this.sortBy,n=this.sortOrder;return t.value===e?" active "+n:""}}}},523:function(t,e,n){e=t.exports=n(508)(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Datatable.vue",sourceRoot:""}])},524:function(t,e,n){var a=n(523);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(509)("d270c356",a,!0,{})},525:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"table__overflow elevation-1"},[n("table",{staticClass:"datatable table"},[t._t("thead",[n("thead",[n("tr",t._l(t.headers,function(e){return"actions"!==e.value||t.actionsVisible?n("th",{staticClass:"column",class:[("right"===e.align?"text-xs-right":"text-xs-left")+t.sortClass(e),{sortable:!1!==e.sortAble}],attrs:{width:e.width},on:{click:function(n){return t.sort(e)}}},[t._v("\n            "+t._s(e.text)+"\n            "),!1!==e.sortAble?n("i",{staticClass:"material-icons icon"},[t._v("arrow_upward")]):t._e()]):t._e()}),0)])]),t._v(" "),t._t("tbody",[n("tbody",t._l(t.items,function(e,a){return n("tr",[t._l(t.headers,function(a){return n("td",{key:a.value,class:"right"===a.align?"text-xs-right":"text-xs-left"},[a.type?"default"===a.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e[a.value],expression:"row[col.value]"}],domProps:{value:e[a.value]},on:{input:function(n){n.target.composing||t.$set(e,a.value,n.target.value)}}}):"number"===a.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e[a.value],expression:"row[col.value]"}],attrs:{type:"number"},domProps:{value:e[a.value]},on:{input:function(n){n.target.composing||t.$set(e,a.value,n.target.value)}}}):"select"===a.type?n("div",{staticClass:"select-cell"},[n("select",{directives:[{name:"model",rawName:"v-model",value:e[a.value],expression:"row[col.value]"}],on:{change:function(n){var i=Array.prototype.filter.call(n.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(e,a.value,n.target.multiple?i:i[0])}}},t._l(a.options,function(e){return n("option",{domProps:{value:e.value}},[t._v("\n                  "+t._s(e.text)+"\n                ")])}),0),t._v(" "),n("v-icon",[t._v("arrow_drop_down")])],1):t._e():n("span",[t._v(t._s(e[a.value]))])])}),t._v(" "),t.actionsVisible?n("td",[t.editBtnVisible?n("v-btn",{attrs:{primary:"",small:""},nativeOn:{click:function(n){return t.$emit("edit",{row:e,index:a})}}},[t._v("Edit")]):t._e(),t._v(" "),t.removeBtnVisible?n("v-btn",{attrs:{error:"",small:""},nativeOn:{click:function(n){return t.$emit("remove",{row:e,index:a})}}},[t._v("Remove")]):t._e()],1):t._e()],2)}),0)])],2)])},staticRenderFns:[]}},656:function(t,e,n){t.exports={default:n(658),__esModule:!0}},658:function(t,e,n){n(660),t.exports=n(10).Object.keys},659:function(t,e,n){var a=n(32),i=n(10),s=n(63);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],r={};r[t]=e(n),a(a.S+a.F*s(function(){n(1)}),"Object",r)}},660:function(t,e,n){var a=n(79),i=n(64);n(659)("keys",function(){return function(t){return i(a(t))}})},672:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(215),i=n.n(a),s=n(62),r=n.n(s),o=n(656),l=n.n(o),c=n(521),u=n.n(c),h=n(143),v={Mon:"Monday",Tue:"Tuesday",Wed:"Wednesday",Thu:"Thursday",Fri:"Friday",Sat:"Saturday",Sun:"Sunday","Mon-Fri":"Monday - Friday","Sat-Sun":"Saturday - Sunday"};e.default={components:{Datatable:u.a},data:function(){return{title:"Timer",loading:!0,changed:!1,originalData:null,channel:null,headers:[{text:"Row",value:"rnum",align:"left",sortAble:!1},{text:"Day - period",value:"cday",align:"left",sortAble:!1,type:"select",options:l()(v).map(function(t){return{value:t,text:v[t]}})},{text:"Time on",value:"timeOnText",align:"left",sortAble:!1,type:"default"},{text:"Time off",value:"timeOffText",align:"left",sortAble:!1,type:"default"}],saving:!1}},computed:{channels:function(){return this.originalData.channels},maxId:function(){var t=-1;return this.channel.rows.forEach(function(e){e.rnum>t&&(t=e.rnum)}),t},channelState:{get:function(){return"on"===this.channel.state},set:function(){}}},created:function(){this.getData(),this.$on("changed",this.onChanged)},mounted:function(){var t=this;this.$nextTick(function(){document.title=t.title})},methods:{getData:function(){var t=this;r.a.all([this.$newService({func:11}),this.$newService({func:13})]).then(function(e){var a=i()(e,2),s=a[0],r=a[1];s.channels=s.chnl,s.channels.forEach(function(t,e){t.description=t.desc,t.state=r.chnl[e].stat,t.rows.forEach(function(t){-1===t.tion&&(t.tion=0),-1===t.tiof&&(t.tiof=0),t.timeOnText=n.i(h.l)(t.tion),t.timeOffText=n.i(h.l)(t.tiof)})}),t.originalData=s,t.loading=!1,s.channels.forEach(function(e){e.rows.forEach(function(e){t.watchRow(e)})})})},watchRow:function(t){this.$watch(function(){return t.cday},this.onChanged),this.$watch(function(){return t.timeOnText},this.onChanged),this.$watch(function(){return t.timeOffText},this.onChanged)},onChanged:function(){this.changed=!0,this.$preventURLChange()},newItem:function(){var t=this.maxId+1;if(t>50)return void this.$alert("Sorry, maximum number of records reached");var e={rnum:t,cday:"Mon",timeOnText:"00:00",timeOffText:"00:00"};this.channel.rows.push(e),this.watchRow(e),this.onChanged()},save:function(){var t=this;if(!this.saving){this.saving=!0;var e=null,a={func:12,chns:this.originalData.channels.map(function(t){return{chnl:t.cnum,nrow:t.rows.length,rows:t.rows.map(function(a){var i={rnum:a.rnum,cday:a.cday,tion:n.i(h.m)(a.timeOnText),tiof:n.i(h.m)(a.timeOffText)};return!e&&(i.tion>0||i.tiof>0)&&i.tion>=i.tiof&&(e={cnum:t.cnum,rnum:a.rnum}),i})}})};if(e)return this.$alert("Time off must be bigger than time on at channel "+(e.cnum+1)+" row "+e.rnum),void(this.saving=!1);this.$newService(a).then(function(){t.saving=!1,t.changed=!1,t.$allowURLChange()},function(e){throw t.saving=!1,e})}},remove:function(t,e){for(var n=e+1;n<this.channel.rows.length;n++){this.channel.rows[n].rnum--}this.channel.rows.splice(e,1),this.onChanged()}}}},687:function(t,e,n){e=t.exports=n(508)(!0),e.push([t.i,".Timer .header{height:55px;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.Timer .header .state-label{color:rgba(0,0,0,.54)}","",{version:3,sources:["/home/neuron/build/html/src/views/Timer.vue"],names:[],mappings:"AACA,eACE,YAAa,AACb,yBAA0B,AACtB,sBAAuB,AACnB,6BAA+B,CACxC,AACD,4BACI,qBAA2B,CAC9B",file:"Timer.vue",sourcesContent:["\n.Timer .header {\n  height: 55px;\n  -webkit-box-pack: justify;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n}\n.Timer .header .state-label {\n    color: rgba(0, 0, 0, 0.54);\n}\n"],sourceRoot:""}])},699:function(t,e,n){var a=n(687);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(509)("73db28c8",a,!0,{})},712:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{staticClass:"ma-3 Timer timer",attrs:{row:"",wrap:""}},[t.loading?t._e():[t.changed?n("v-flex",{staticClass:"mb-1",attrs:{xs12:""}},[n("v-btn",{staticClass:"ml-0",attrs:{primary:"",loading:t.saving},on:{click:t.save}},[t._v("Save")])],1):t._e(),t._v(" "),n("v-flex",{staticClass:"header",attrs:{xs12:""}},[n("div",{staticStyle:{width:"250px"}},[n("v-select",{attrs:{items:t.channels,"item-text":"name",label:"Channel"},model:{value:t.channel,callback:function(e){t.channel=e},expression:"channel"}})],1),t._v(" "),t.channel?n("div",{staticStyle:{width:"250px"}},[n("v-text-field",{attrs:{label:"Description"},model:{value:t.channel.description,callback:function(e){t.$set(t.channel,"description",e)},expression:"channel.description"}})],1):t._e(),t._v(" "),t.channel?n("div",{staticClass:"flex-col",staticStyle:{width:"250px"}},[n("span",{staticClass:"state-label"},[t._v("State")]),t._v(" "),n("v-switch",{staticClass:"pa-0",model:{value:t.channelState,callback:function(e){t.channelState=e},expression:"channelState"}})],1):t._e()]),t._v(" "),t.channel?n("v-flex",{staticClass:"mb-1",attrs:{xs12:""}},[n("v-btn",{staticClass:"ml-0",on:{click:t.newItem}},[t._v("New")])],1):t._e(),t._v(" "),t.channel?n("v-flex",{attrs:{xs12:""}},[n("div",{staticClass:"w-100"},[n("Datatable",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.channel.rows,editBtnVisible:!1},on:{remove:function(e){return t.remove(e.row,e.index)}}})],1)]):t._e()],t._v(" "),t.loading?n("LoadingBlock"):t._e()],2)},staticRenderFns:[]}}});
//# sourceMappingURL=4.24f1beecf4d09093d4ce.js.map