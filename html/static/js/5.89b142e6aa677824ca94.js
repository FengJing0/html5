webpackJsonp([5],{518:function(e,t,r){function s(e){r(697)}var a=r(76)(r(675),r(710),s,null,null);e.exports=a.exports},521:function(e,t,r){function s(e){r(524)}var a=r(76)(r(522),r(525),s,null,null);e.exports=a.exports},522:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{headers:{},items:{},actionsVisible:{default:!0},editBtnVisible:{default:!0},removeBtnVisible:{default:!0}},data:function(){return{sortBy:null,sortOrder:null}},methods:{sort:function(e){if(!1!==e.sortAble){var t=this.sortBy,r=this.sortOrder;e.value===t?this.sortOrder="desc"===r?"asc":"desc":(this.sortBy=e.value,this.sortOrder="desc"),this.items.sort(function(t,r){var s=t[e.value],a=r[e.value];return s<a?-1:s===a?0:1}),"desc"===this.sortOrder&&this.items.reverse()}},sortClass:function(e){if(!1===e.sortAble)return"";var t=this.sortBy,r=this.sortOrder;return e.value===t?" active "+r:""}}}},523:function(e,t,r){t=e.exports=r(508)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"Datatable.vue",sourceRoot:""}])},524:function(e,t,r){var s=r(523);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);r(509)("d270c356",s,!0,{})},525:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"table__overflow elevation-1"},[r("table",{staticClass:"datatable table"},[e._t("thead",[r("thead",[r("tr",e._l(e.headers,function(t){return"actions"!==t.value||e.actionsVisible?r("th",{staticClass:"column",class:[("right"===t.align?"text-xs-right":"text-xs-left")+e.sortClass(t),{sortable:!1!==t.sortAble}],attrs:{width:t.width},on:{click:function(r){return e.sort(t)}}},[e._v("\n            "+e._s(t.text)+"\n            "),!1!==t.sortAble?r("i",{staticClass:"material-icons icon"},[e._v("arrow_upward")]):e._e()]):e._e()}),0)])]),e._v(" "),e._t("tbody",[r("tbody",e._l(e.items,function(t,s){return r("tr",[e._l(e.headers,function(s){return r("td",{key:s.value,class:"right"===s.align?"text-xs-right":"text-xs-left"},[s.type?"default"===s.type?r("input",{directives:[{name:"model",rawName:"v-model",value:t[s.value],expression:"row[col.value]"}],domProps:{value:t[s.value]},on:{input:function(r){r.target.composing||e.$set(t,s.value,r.target.value)}}}):"number"===s.type?r("input",{directives:[{name:"model",rawName:"v-model",value:t[s.value],expression:"row[col.value]"}],attrs:{type:"number"},domProps:{value:t[s.value]},on:{input:function(r){r.target.composing||e.$set(t,s.value,r.target.value)}}}):"select"===s.type?r("div",{staticClass:"select-cell"},[r("select",{directives:[{name:"model",rawName:"v-model",value:t[s.value],expression:"row[col.value]"}],on:{change:function(r){var a=Array.prototype.filter.call(r.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.$set(t,s.value,r.target.multiple?a:a[0])}}},e._l(s.options,function(t){return r("option",{domProps:{value:t.value}},[e._v("\n                  "+e._s(t.text)+"\n                ")])}),0),e._v(" "),r("v-icon",[e._v("arrow_drop_down")])],1):e._e():r("span",[e._v(e._s(t[s.value]))])])}),e._v(" "),e.actionsVisible?r("td",[e.editBtnVisible?r("v-btn",{attrs:{primary:"",small:""},nativeOn:{click:function(r){return e.$emit("edit",{row:t,index:s})}}},[e._v("Edit")]):e._e(),e._v(" "),e.removeBtnVisible?r("v-btn",{attrs:{error:"",small:""},nativeOn:{click:function(r){return e.$emit("remove",{row:t,index:s})}}},[e._v("Remove")]):e._e()],1):e._e()],2)}),0)])],2)])},staticRenderFns:[]}},675:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(61),a=r.n(s),n=(r(78),r(521)),i=r.n(n);t.default={components:{Datatable:i.a},data:function(){var e=this.$store.state.userLevels,t=[];for(var r in e)t.push({value:parseInt(r),text:e[r]});return{title:"User",loading:!0,rows:[],headers:[{text:"Name",value:"name",align:"left",sortAble:!1},{text:"Actions",value:"actions",align:"left",sortAble:!1}],saving:!1,succeeded:!1,userLevels:e,userLevelsArr:t,userForm:{mode:null,visible:!1,data:{}},rules:{required:function(e){return!!e||"Required"}}}},computed:{userLevelsArrDefault:function(){var e=this;try{return this.userLevelsArr.filter(function(t){return e.userForm.data.allowedLevel.includes(t.value)})}catch(e){return[]}}},created:function(){this.getData()},mounted:function(){var e=this;this.$nextTick(function(){document.title=e.title})},methods:{getData:function(){var e=this;this.$newService({func:4}).then(function(t){e.rows=t.user.map(function(e){return{name:e,removing:!1}})})},newItem:function(){this.userForm.mode="add",this.userForm.visible=!0,this.userForm.data={name:"",timeout:"0",password:"",confirmPassword:"",defaultLevel:null,allowedLevel:[]}},edit:function(e,t){var r=this;this.$newService({func:5,name:e.name}).then(function(e){r.userForm.mode="edit",r.userForm.visible=!0,r.userForm.data={name:e.usrn,timeout:e.tout.toString(),password:"",confirmPassword:"",defaultLevel:e.defl.toString(),allowedLevel:e.alwl.map(function(e){return e.toString()})}})},save:function(){var e=this;if(!this.saving){var t=this.userForm.data,r=this.userForm.mode,s=!0;for(var n in t)if(null==t[n]||""===t[n]){s=!1;break}if(!s)return void this.$alert("Required field can't be empty");if(t.password!==t.confirmPassword)return void this.$alert("The password confirmation does not match");this.saving=!0;var i={func:6,cusr:"add"===r?1:0,name:t.name,pass:t.password,tout:parseInt(t.timeout),defl:parseInt(t.defaultLevel),nalw:t.allowedLevel.length,alwl:t.allowedLevel.map(function(e){return parseInt(e)})};this.$newService(i).then(function(t){!t||t.errc>0?(e.$alert(t&&t.errt||"Save failed: "+a()(t)),console.log(t)):(e.userForm.visible=!1,e.getData()),e.saving=!1})}},remove:function(e,t){var r=this;this.$confirm("Are you sure to remove the user?").then(function(){e.removing=!0,r.$newService({func:7,name:e.name}).then(function(){e.removing=!1,r.rows.splice(t,1)})})}}}},685:function(e,t,r){t=e.exports=r(508)(!0),t.push([e.i,".userFormDialog{width:90%!important;max-width:600px!important}","",{version:3,sources:["/home/neuron/build/html/src/views/User.vue"],names:[],mappings:"AACA,gBACE,oBAAsB,AACtB,yBAA4B,CAC7B",file:"User.vue",sourcesContent:["\n.userFormDialog {\n  width: 90% !important;\n  max-width: 600px !important;\n}\n"],sourceRoot:""}])},697:function(e,t,r){var s=r(685);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);r(509)("511b20e8",s,!0,{})},710:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{staticClass:"use view-page ma-3",attrs:{row:"",wrap:""}},[r("v-flex",{staticClass:"mb-1 flex-align-center",attrs:{xs12:""}},[r("v-btn",{staticClass:"ml-0",on:{click:e.newItem}},[e._v("New")])],1),e._v(" "),r("v-flex",{attrs:{xs12:""}},[r("Datatable",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.rows}},[r("tbody",{attrs:{slot:"tbody"},slot:"tbody"},e._l(e.rows,function(t,s){return r("tr",e._l(e.headers,function(a){return r("td",{staticClass:"text-xs-left"},["actions"!==a.value?[e._v("\n              "+e._s(t[a.value])+"\n            ")]:[r("v-btn",{attrs:{error:"",small:""},on:{click:function(r){return e.remove(t,s)}}},[e._v("\n                Remove\n              ")]),e._v(" "),t.removing?r("v-progress-circular",{staticClass:"primary--text",attrs:{indeterminate:"",size:20}}):e._e(),e._v(" "),r("v-btn",{staticClass:"ml-0",attrs:{small:""},on:{click:function(r){return e.edit(t,s)}}},[e._v("\n                Edit\n              ")])]],2)}),0)}),0)])],1),e._v(" "),r("v-dialog",{attrs:{persistent:"","content-class":"userFormDialog"},model:{value:e.userForm.visible,callback:function(t){e.$set(e.userForm,"visible",t)},expression:"userForm.visible"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s("add"===e.userForm.mode?"Add":"Edit")+" User")])]),e._v(" "),r("v-card-text",[r("v-container",{attrs:{"grid-list-md":""}},[r("v-layout",{attrs:{wrap:""}},[r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"User Name",required:"",rules:[e.rules.required],disabled:"edit"===e.userForm.mode},model:{value:e.userForm.data.name,callback:function(t){e.$set(e.userForm.data,"name",t)},expression:"userForm.data.name"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"Password",type:"password",required:"",rules:[e.rules.required]},model:{value:e.userForm.data.password,callback:function(t){e.$set(e.userForm.data,"password",t)},expression:"userForm.data.password"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"Confirm Password",type:"password",required:"",rules:[e.rules.required]},model:{value:e.userForm.data.confirmPassword,callback:function(t){e.$set(e.userForm.data,"confirmPassword",t)},expression:"userForm.data.confirmPassword"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-text-field",{attrs:{label:"Timeout",type:"number",required:"",rules:[e.rules.required]},model:{value:e.userForm.data.timeout,callback:function(t){e.$set(e.userForm.data,"timeout",t)},expression:"userForm.data.timeout"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-select",{attrs:{items:e.userLevelsArr,"item-text":"text","item-value":"value",multiple:"",label:"Allowed level",bottom:""},model:{value:e.userForm.data.allowedLevel,callback:function(t){e.$set(e.userForm.data,"allowedLevel",t)},expression:"userForm.data.allowedLevel"}})],1),e._v(" "),r("v-flex",{attrs:{xs12:""}},[r("v-select",{attrs:{items:e.userLevelsArrDefault,rules:[e.rules.required],"item-text":"text","item-value":"value",label:"Default level",bottom:""},model:{value:e.userForm.data.defaultLevel,callback:function(t){e.$set(e.userForm.data,"defaultLevel",t)},expression:"userForm.data.defaultLevel"}})],1)],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),e.saving?r("v-progress-circular",{staticClass:"primary--text",attrs:{indeterminate:"",size:20}}):e._e(),e._v(" "),r("v-btn",{staticClass:"blue--text darken-1",attrs:{flat:""},nativeOn:{click:function(t){e.userForm.visible=!1}}},[e._v("Close")]),e._v(" "),r("v-btn",{staticClass:"blue--text darken-1",attrs:{flat:""},nativeOn:{click:function(t){return e.save(t)}}},[e._v("Save")])],1)],1)],1)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=5.89b142e6aa677824ca94.js.map