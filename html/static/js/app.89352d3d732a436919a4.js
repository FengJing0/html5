webpackJsonp([10],{143:function(e,t,n){"use strict";function r(e,t,n,r){var a=e.create({baseURL:n.state.urls.server.base,timeout:2e4});t.Axios=e,t.http=t.prototype.$http=a}function a(e,t,n){n.use(e.validator),P()(n.validator.rules,e.rules),P()(n.validator.messages,e.enMessages),n.validator.validClass="valid",n.validator.invalidClass="md-input-invalid"}function s(e,t,n,r,a){return t.use(e),new e({mode:"history",base:r.clientBaseUrl,routes:a})}function o(e,t){var n=!1,r="It looks like you have been editing something.\nIf you leave before saving, your changes will be lost.",a=void 0;t.beforeEach(function(t,s,o){n?window.confirm(a||r)?(e.allowURLChange(),o()):o(!1):o()});var s=function(e){var t=a||r;return e.returnValue=t,t};e.preventURLChange=e.prototype.$preventURLChange=function(e){null!=e&&(a=e),n||(n=!0,window.addEventListener("beforeunload",s))},e.allowURLChange=e.prototype.$allowURLChange=function(){n=!1,window.removeEventListener("beforeunload",s)}}function i(e){var t=e/60,n=Math.floor(t/60),r=Math.floor(t%60);return(n<10?"0"+n:n.toString())+":"+(r<10?"0"+r:r.toString())}function l(e){var t=e.split(":"),n=w()(t,2);return 3600*n[0]+60*n[1]}function c(e){var t=Math.floor(e/60),n=Math.floor(e%60);return(t<10?"0"+t:t.toString())+":"+(n<10?"0"+n:n.toString())}function u(e){var t=e.split(":").map(function(e){return parseInt(e)}),n=w()(t,2);return 60*n[0]+n[1]}function v(e,t){var n={},r=!0,a=!1,s=void 0;try{for(var o,i=x()(t);!(r=(o=i.next()).done);r=!0){var l=o.value;n[l]=e[l]}}catch(e){a=!0,s=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw s}}return n}function d(e){return h()(C)[e-1].name}function f(e,t){for(var n=e.length>t.length?e.length:t.length,r=0;r<n;r++){var a=e[r]||0,s=t[r]||0;if(a!==s)return a-s}return 0}function p(e){e=e||"";var t={year:e.substr(0,4),month:e.substr(5,2),date:e.substr(8,2),hour:e.substr(11,2),minute:e.substr(14,2)};for(var n in t)t[n]=parseInt(t[n]);return t}t.a=r,t.b=a,t.c=s,t.d=o,t.l=i,t.m=l,t.g=c,t.i=u,t.h=v,n.d(t,"e",function(){return C}),t.f=d,t.j=f,t.k=p;var m=n(212),h=n.n(m),b=n(215),w=n.n(b),g=n(214),_=(n.n(g),n(247)),y=(n.n(_),n(142)),x=n.n(y),k=n(144),P=n.n(k),C=(n(77),n(99),n(78),{Jan:{name:"January",short:"Jan",number:1,days:31},Feb:{name:"February",short:"Feb",number:2,days:28},Mar:{name:"March",short:"Mar",number:3,days:31},Apr:{name:"April",short:"Apr",number:4,days:30},May:{name:"May",short:"May",number:5,days:31},Jun:{name:"June",short:"Jun",number:6,days:30},Jul:{name:"July",short:"Jul",number:7,days:31},Aug:{name:"August",short:"Aug",number:8,days:31},Sep:{name:"September",short:"Sep",number:9,days:30},Oct:{name:"October",short:"Oct",number:10,days:31},Nov:{name:"November",short:"Nov",number:11,days:30},Dec:{name:"December",short:"Dec",number:12,days:31}})},204:function(e,t,n){"use strict";t.a=[{path:"/login",name:"login",component:function(e){return n.e(8).then(function(){var t=[n(513)];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/datathread",name:"datathread",component:function(e){return n.e(2).then(function(){var t=[n(511)];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/globalVariable",name:"globalVariable",component:function(e){return n.e(7).then(function(){var t=[n(512)];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/program",name:"program",component:function(e){return n.e(3).then(function(){var t=[n(514)];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/timer",name:"timer",component:function(e){return n.e(4).then(function(){var t=[n(515)];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/alarmLog",name:"alarmLog",component:function(e){return n.e(1).then(function(){var t=[n(510)];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/trends",name:"trends",component:function(e){return n.e(0).then(function(){var t=[n(517)];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/timerExceptions",name:"timerExceptions",component:function(e){return n.e(6).then(function(){var t=[n(516)];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/user",name:"user",component:function(e){return n.e(5).then(function(){var t=[n(518)];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"*",redirect:{name:"datathread"}}]},205:function(e,t,n){"use strict";var r=n(61),a=n.n(r),s=n(62),o=n.n(s),i=n(99),l=n(507),c=n(239),u=n(238),v=n(78),d=n(213);i.a.use(l.a);var f=new l.a.Store({modules:{urls:c.a},state:{initialized:!1,user:null,authenticated:!1,builtAt:window.builtAt,menu:u.a,brand:"Neuron",loginSubtitle:"Sign in to start your session",rules:{required:function(e){return null!=e&&""!==e||"Required"}},userLevels:{0:" VIEW",1:" OPERATOR",2:" DATA ENTRY",3:" MAINTENANCE",4:" SUPERVISOR",5:" ENGINEER",6:" DESIGNER",7:" MANAGER","-1":" ALL"},userRemember:8,datepickerOption:{type:"min",week:["Mo","Tu","We","Th","Fr","Sa","Su"],month:["January","February","March","April","May","June","July","August","September","October","November","December"],format:"YYYY-MM-DD HH:mm"}},mutations:{initialized:function(e,t){e.initialized=t}},actions:{login:function(e,t){var n=e.state,r=t.username,a=t.password;return new o.a(function(e,t){var s=new v.a;s.type="services",s.username=r,s.password=a,s.onlogin=function(a){a.hasOwnProperty("errc")?t(new Error("login failed")):(n.user={name:r,username:r,info:a},n.authenticated=!0,e(a)),s.close()},s.connect()})},autoExtendUserRememberTime:function(e){var t=e.state,r=JSON.parse(window.localStorage.getItem("user")),s=3600*t.userRemember*1e3;r.expired_at-(new Date).getTime()<s&&(r.expired_at=n.i(d.b)(new Date,t.userRemember).getTime(),window.localStorage.setItem("user",a()(r)))}}});t.a=f},208:function(e,t,n){function r(e){n(494)}var a=n(76)(n(233),n(503),r,null,null);e.exports=a.exports},209:function(e,t,n){var r=n(76)(n(234),n(502),null,null,null);e.exports=r.exports},233:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(62),a=n.n(r),s=n(61),o=n.n(s),i=n(500),l=n.n(i),c=n(501),u=n.n(c);t.default={name:"app",components:{Prompt:l.a,Sidebar:u.a},data:function(){return{drawer:!1,rightDrawer:!1,right:null,userLevels:this.$store.state.userLevels,changePasswordVisible:!1,oldPassword:null,newPassword:null,newPassword2:null,rules:{required:function(e){return!!e||"Required"}},alert:{visible:!1,content:null},confirm:{visible:!1,title:null,content:null,cancel:function(){this.visible=!1,this.reject()},ok:function(){this.visible=!1,this.resolve()}}}},computed:{state:function(){return this.$store.state}},methods:{logout:function(){window.localStorage.removeItem("user"),this.state.authenticated=null,this.$router.push({name:"login"}),this.state.user=null},changePassword:function(){var e=this,t=this.oldPassword,n=this.newPassword,r=this.newPassword2;return t&&n&&r?n!==r?void this.$alert("The password confirmation does not match"):void this.$newService({func:12,name:this.$store.state.user.username,pass:t,npwd:n}).then(function(t){if(console.log(t),t.err>0)e.$alert("The change password operation failed");else{e.$alert("The password is successfully changed"),e.changePasswordVisible=!1,e.oldPassword=null,e.newPassword=null,e.newPassword2=null;var r={username:e.state.user.username,password:n};window.localStorage.setItem("user",o()(r))}}):void this.$alert("Required field can't be empty")}},created:function(){var e=this,t=window.localStorage.getItem("user"),n=t&&JSON.parse(t);!n||!n.expired_at||n.expired_at<=(new Date).getTime()?n=null:setInterval(function(){e.$store.dispatch("autoExtendUserRememberTime")},36e5);var r=function(){"login"!==e.$route.name&&e.$router.push({name:"login"})},s=void 0;s="login"===this.$route.name?a.a.resolve():n?this.$store.dispatch("login",n):a.a.reject(new Error("no user info")),s.catch(function(){r()}).then(function(){e.$store.state.initialized=!0});var o=this.$root.constructor;o.alert=o.prototype.$alert=function(t){window.setTimeout(function(){e.alert.content=t,e.alert.visible=!0},100)},o.confirm=o.prototype.$confirm=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new a.a(function(n,r){window.setTimeout(function(){e.confirm.content=t,e.confirm.visible=!0},100),e.confirm.resolve=n,e.confirm.reject=r})}}}},234:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={}},235:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(62),a=n.n(r);t.default={data:function(){return{visible:!1,note:null,value:""}},methods:{ok:function(){this.visible=!1,this.resolve(this.value)},cancel:function(){this.visible=!1,this.reject()}},created:function(){var e=this,t=this.$root.constructor;t.prompt=t.prototype.$prompt=function(t,n){return new a.a(function(r,a){window.setTimeout(function(){e.note=t||"Plesse input",e.value=n||"",e.visible=!0},100),e.resolve=r,e.reject=a})}}}},236:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:{value:{},menu:{}},data:function(){return{mini:!1}}}},237:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(61),a=n.n(r),s=n(62),o=n.n(s),i=n(206),l=(n.n(i),n(99)),c=n(210),u=n(203),v=n.n(u),d=n(211),f=n.n(d),p=n(207),m=n(98),h=n(208),b=n.n(h),w=n(205),g=n(204),_=n(143),y=n(209),x=n.n(y),k=n(78);l.a.config.productionTip=m.a.isDevelopment,l.a.config.debug=m.a.isDevelopment,l.a.config.devtools=m.a.isDevelopment,n.i(_.a)(v.a,l.a,w.a,m.a),l.a.use(f.a),n.i(_.b)(p,w.a,l.a);var P=n.i(_.c)(c.a,l.a,w.a,m.a,g.a);n.i(_.d)(l.a,P),l.a.component("LoadingBlock",x.a),l.a.mixin({methods:{$newService:function(e){console.log("new datathread connect, func is follow"),console.log(e);var t=new k.a;return this.datasources||(this.datasources=[]),this.datasources.push(t),t.type="datathread",t.func=e,new o.a(function(e,n){t.ongetdata=function(r){console.log("data is follow"),console.log(r),t.close();var s=r;!s||s.errc>0?(l.a.alert(s&&s.errt||"Failed: "+a()(s)),console.log(s),n(s)):e(s)},t.connect()})}},beforeDestroy:function(){this.datasources&&this.datasources.forEach(function(e){return e.close()})}}),new l.a({el:"#app",store:w.a,router:P,template:"<App/>",components:{App:b.a}})},238:function(e,t,n){"use strict";t.a=[{text:"Data Thread",icon:"dashboard",route:{name:"datathread"}},{text:"Global Variable",route:{name:"globalVariable"}},{text:"Program",route:{name:"program"}},{text:"Timer",route:{name:"timer"}},{text:"Timer Exceptions",route:{name:"timerExceptions"}},{text:"Reports",children:[{text:"Alarm Log",route:{name:"alarmLog"}},{text:"Trends",route:{name:"trends"}}]},{text:"User",route:{name:"user"},isAllowed:function(e){return"root"===e.state.user.name}}]},239:function(e,t,n){"use strict";var r=n(98);t.a={state:{client:{base:r.a.clientBaseUrl,login:r.a.clientLoginUrl},server:{base:r.a.serverBaseUrl}},mutations:{}}},494:function(e,t){},495:function(e,t){},496:function(e,t){},500:function(e,t,n){function r(e){n(496)}var a=n(76)(n(235),n(505),r,null,null);e.exports=a.exports},501:function(e,t,n){function r(e){n(495)}var a=n(76)(n(236),n(504),r,null,null);e.exports=a.exports},502:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"absolute-backdrop center-wrapper"},[n("v-progress-circular",{staticClass:"primary--text",attrs:{indeterminate:""}})],1)},staticRenderFns:[]}},503:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{staticClass:"flex flex-col",attrs:{id:"app",standalone:"",toolbar:""}},[e.$store.state.initialized?["login"===e.$route.name?n("router-view"):e.$store.state.authenticated?[n("Sidebar",{attrs:{menu:e.state.menu},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}}),e._v(" "),n("v-navigation-drawer",{staticClass:"right-sidebar",attrs:{temporary:"",light:"",overflow:"",absolute:"",right:""},model:{value:e.rightDrawer,callback:function(t){e.rightDrawer=t},expression:"rightDrawer"}},[n("v-toolbar",{staticClass:"cyan"},[n("v-icon",[e._v("person")]),e._v(" "),n("v-toolbar-title",{staticClass:"white--text"},[e._v("Profile")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{icon:""},nativeOn:{click:function(t){e.rightDrawer=!1}}},[n("v-icon",[e._v("chevron_right")])],1)],1),e._v(" "),n("div",{staticClass:"pa-3"},[n("div",{staticClass:"user-info"},[n("b",[e._v("Name")]),e._v(" "),n("span",[e._v(e._s(e.state.user.username))]),e._v(" "),n("br"),e._v(" "),n("b",[e._v("Default level")]),e._v(" "),n("span",[e._v(e._s(e.userLevels[e.state.user.info.defl]))]),e._v(" "),n("br"),e._v(" "),n("b",[e._v("Allowed level")]),e._v(" "),n("span",[e._v(e._s(e.state.user.info.alwl.map(function(e){return e.atxt}).join(", ")))])]),e._v(" "),n("div",{},[n("v-btn",{staticClass:"ml-0",attrs:{light:""},nativeOn:{click:function(t){t.stopPropagation(),e.changePasswordVisible=!e.changePasswordVisible}}},[e._v("Change Password")])],1),e._v(" "),n("form",{directives:[{name:"show",rawName:"v-show",value:e.changePasswordVisible,expression:"changePasswordVisible"}],staticClass:"change-password",on:{submit:function(t){return t.preventDefault(),e.changePassword(t)}}},[n("v-text-field",{attrs:{type:"password",label:"Old Password",rules:[e.rules.required]},model:{value:e.oldPassword,callback:function(t){e.oldPassword="string"==typeof t?t.trim():t},expression:"oldPassword"}}),e._v(" "),n("v-text-field",{attrs:{type:"password",label:"New Password",rules:[e.rules.required]},model:{value:e.newPassword,callback:function(t){e.newPassword="string"==typeof t?t.trim():t},expression:"newPassword"}}),e._v(" "),n("v-text-field",{attrs:{type:"password",label:"Confirm New Password",rules:[e.rules.required]},model:{value:e.newPassword2,callback:function(t){e.newPassword2="string"==typeof t?t.trim():t},expression:"newPassword2"}}),e._v(" "),n("v-btn",{staticClass:"ml-0",attrs:{primary:"",dark:"",type:"submit"}},[e._v("Save")])],1),e._v(" "),n("div",{},[n("v-btn",{staticClass:"ml-0",attrs:{warning:"",dark:""},nativeOn:{click:function(t){return e.logout(t)}}},[e._v("Logout")])],1)])],1),e._v(" "),n("v-toolbar",{staticClass:"cyan",attrs:{fixed:"",dark:""}},[n("v-toolbar-side-icon",{nativeOn:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),e._v(" "),n("v-toolbar-title",[e._v(e._s(e.$store.state.brand))]),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{flat:""},nativeOn:{click:function(t){t.stopPropagation(),e.rightDrawer=!e.rightDrawer}}},[e._v(e._s(e.state.user.username))])],1),e._v(" "),n("main",{staticClass:"flex-1"},[n("router-view")],1)]:e._e()]:n("div",{staticClass:"absolute-backdrop center-wrapper"},[n("v-progress-circular",{staticClass:"primary--text",attrs:{indeterminate:"",size:50}})],1),e._v(" "),n("v-dialog",{attrs:{lazy:"",absolute:""},model:{value:e.alert.visible,callback:function(t){e.$set(e.alert,"visible",t)},expression:"alert.visible"}},[n("v-card",[n("v-card-text",[e._v(e._s(e.alert.content))]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"green--text darken-1",attrs:{flat:""},nativeOn:{click:function(t){e.alert.visible=!1}}},[e._v("OK")])],1)],1)],1),e._v(" "),n("v-dialog",{attrs:{lazy:"",absolute:""},model:{value:e.confirm.visible,callback:function(t){e.$set(e.confirm,"visible",t)},expression:"confirm.visible"}},[n("v-card",[n("v-card-title",[n("div",{staticClass:"headline"},[e._v(e._s(e.confirm.title))])]),e._v(" "),n("v-card-text",[e._v(e._s(e.confirm.content))]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"orange--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.confirm.cancel(t)}}},[e._v("Cancel")]),e._v(" "),n("v-btn",{staticClass:"teal--text darken-1",attrs:{flat:"flat"},nativeOn:{click:function(t){return e.confirm.ok(t)}}},[e._v("OK")])],1)],1)],1),e._v(" "),n("Prompt")],2)},staticRenderFns:[]}},504:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{staticClass:"sidebar",attrs:{temporary:"",value:e.value,"mini-variant":e.mini,overflow:"",absolute:""},on:{input:function(t){return e.$emit("input",t)}}},[n("div",{staticClass:"site-brand"},[e._v("\n    "+e._s(e.$store.state.brand)+"\n  ")]),e._v(" "),n("v-list",{staticClass:"pt-0",attrs:{dense:""}},e._l(e.menu,function(t){return!t.isAllowed||t.isAllowed(e.$store)?n("v-list-group",{key:t.text,attrs:{value:t.active}},[n("v-list-tile",{attrs:{slot:"item",href:t.route&&e.$router.resolve(t.route).href},on:{click:function(n){n.preventDefault(),t.route&&e.$router.push(t.route)}},slot:"item"},[n("v-list-tile-action",[n("v-icon",{attrs:{dark:""}},[e._v(e._s(t.icon))])],1),e._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[e._v(e._s(t.text))])],1),e._v(" "),t.children&&t.children.length?n("v-list-tile-action",[n("v-icon",{attrs:{dark:""}},[e._v("keyboard_arrow_down")])],1):e._e()],1),e._v(" "),t.children&&t.children.length?e._l(t.children,function(t){return!t.isAllowed||t.isAllowed(e.$store)?n("v-list-tile",{key:t.text,attrs:{href:t.route&&e.$router.resolve(t.route).href},on:{click:function(n){n.preventDefault(),t.route&&e.$router.push(t.route)}}},[n("v-list-tile-content",[n("v-list-tile-title",[e._v(e._s(t.text))])],1),e._v(" "),n("v-list-tile-action",[n("v-icon",{attrs:{dark:""}},[e._v(e._s(t.icon))])],1)],1):e._e()}):e._e()],2):e._e()}),1)],1)},staticRenderFns:[]}},505:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{persistent:"",width:"50%"},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("v-card",[n("v-card-text",[n("v-container",{attrs:{"grid-list-md":""}},[n("v-layout",{attrs:{wrap:""}},[n("v-flex",{attrs:{xs12:""}},[n("div",{staticClass:"w-100"},[n("p",[e._v("\n                "+e._s(e.note)+"\n              ")]),e._v(" "),n("v-text-field",{model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)])],1)],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{staticClass:"blue--text darken-1",attrs:{flat:""},nativeOn:{click:function(t){return e.cancel(t)}}},[e._v("Cancel")]),e._v(" "),n("v-btn",{staticClass:"blue--text darken-1",attrs:{flat:""},nativeOn:{click:function(t){return e.ok(t)}}},[e._v("OK")])],1)],1)],1)},staticRenderFns:[]}},78:function(e,t,n){"use strict";var r=n(61),a=n.n(r),s=n(245),o=n.n(s),i=n(246),l=n.n(i),c=n(98),u=void 0,v=void 0,d=function(){function e(){o()(this,e),this.wsUri=c.a.serverBaseUrl,this.type="datathread"}return l()(e,[{key:"connect",value:function(){var e=this;this.close();var t=this.wsUri;this.websocket=new window.WebSocket(t,this.type),this.websocket.addEventListener("open",function(){e.username&&(u=e.username,v=e.password);var t={func:10,name:u,pass:v},n=a()(t);e.websocket.send(n)}),this.websocket.addEventListener("close",function(){console.log("socket closed")}),this.websocket.addEventListener("error",function(e){throw console.log("socket error"),e});var n=0;this.websocket.addEventListener("message",function(t){var r=t.data&&JSON.parse(t.data);switch(0===n&&e.onlogin&&e.onlogin(r),e.type){case"datathread":if(0===n){var s=a()(e.func);e.send(s)}else 1===n?e.ongetdata&&e.ongetdata(r):n>1&&(n%2==1?e.ongetdata1&&e.ongetdata1(r):e.ongetdata2&&e.ongetdata2(r))}n++})}},{key:"close",value:function(){this.websocket&&(this.websocket.close(),this.websocket=null)}},{key:"send",value:function(e){return this.websocket&&this.websocket.send(e)}}]),e}();t.a=d},98:function(e,t,n){"use strict";var r=n(144),a=n.n(r),s=void 0;try{s=window.serverBaseUrl}catch(e){}var o={isDevelopment:!1,isCROS:!1,CROS:{CSRFTokenRequired:!0,updateCSRFTokenIn:3e5},clientBaseUrl:"/",clientLoginUrl:null};a()(o,{serverBaseUrl:s||"ws://"+window.location.hostname+":"+window.location.port+"/"}),t.a=o}},[237]);
//# sourceMappingURL=app.89352d3d732a436919a4.js.map