(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e95df21","chunk-2d0d05c7"],{2472:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("Container",{attrs:{type:"card-full",scorll:!1}},[i("div",{staticClass:"flex"},[i("div",{staticClass:"dd-title"},[t._v("Script Programming")]),i("div",{staticClass:"row"},[i("ScriptTypeSelect",{on:{delete:t.init,submit:t.submit},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}}),t._v("\n        \n      "),i("el-button",{staticClass:"dd-fr",attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("submit")])],1)]),i("el-table",{staticClass:"scriptTable",attrs:{height:t.tableHeight,data:t.scriptData,border:""}},[i("el-table-column",{attrs:{label:"stmt","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.row.stmt,callback:function(i){t.$set(e.row,"stmt",i)},expression:"scope.row.stmt"}},t._l(t.scriptList,(function(t){return i("el-option",{key:t.val,attrs:{label:t.val,value:t.val}})})),1)]}}])}),i("el-table-column",{attrs:{label:"expr","min-width":"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{attrs:{placeholder:""},model:{value:e.row.expr,callback:function(i){t.$set(e.row,"expr",i)},expression:"scope.row.expr"}})]}}])}),i("el-table-column",{attrs:{label:"edit","min-width":"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"btn"},[i("i",{staticClass:"el-icon-circle-plus plus",on:{click:function(i){return t.add(e.$index)}}}),t._v(" \n          "),i("i",{staticClass:"el-icon-remove remove",on:{click:function(i){return t.remove(e.$index)}}})])]}}])})],1)],1)},s=[],r=(i("7f7f"),i("7de8")),u=i("f121"),a=i("683b"),l={mixins:[r["a"]],data:function(){return{scriptData:[],scriptList:u["d"],type:{name:"",subr:""}}},methods:{init:function(){this.scriptData=[];var t=6;while(t--)this.scriptData.push({stmt:"",expr:""})},readSubroutine:function(t){this.$ws().set({success:this.getData}).send({func:33,subr:+t})},getData:function(t){33===t.func&&(this.$ws().remove(this.getData),t.rows?0===t.rows.length?this.init():this.scriptData=t.rows:this.init())},handleSubmit:function(){var t=this;this.type.subr?this.$confirm("Are you sure submit these script programming","Submit",{type:"warning"}).then((function(){var e=t.scriptData,i=t.type,n=i.name,s=i.subr;t.submit(n,s,e)})).catch((function(){})):this.$message.error("select a subroutine")},submit:function(t,e,i){i||(i=[]),this.$ws().set().send({func:34,csub:0,name:t,subr:+e,nrow:i.length,rows:i})},add:function(t){this.scriptData.splice(t+1,0,{stmt:"",expr:""})},remove:function(t){this.scriptData.splice(t,1)}},watch:{"type.subr":function(t){t&&this.readSubroutine(t)}},computed:{tableHeight:function(){return window.innerHeight-60-50-40-50}},components:{ScriptTypeSelect:a["default"]}},o=l,c=(i("d5ce"),i("2877")),b=Object(c["a"])(o,n,s,!1,null,"1a47de06",null);e["default"]=b.exports},"28a5":function(t,e,i){"use strict";var n=i("aae3"),s=i("cb7c"),r=i("ebd6"),u=i("0390"),a=i("9def"),l=i("5f1b"),o=i("520a"),c=i("79e5"),b=Math.min,p=[].push,d="split",f="length",m="lastIndex",h=4294967295,v=!c((function(){RegExp(h,"y")}));i("214f")("split",2,(function(t,e,i,c){var y;return y="c"=="abbc"[d](/(b)*/)[1]||4!="test"[d](/(?:)/,-1)[f]||2!="ab"[d](/(?:ab)*/)[f]||4!="."[d](/(.?)(.?)/)[f]||"."[d](/()()/)[f]>1||""[d](/.?/)[f]?function(t,e){var s=String(this);if(void 0===t&&0===e)return[];if(!n(t))return i.call(s,t,e);var r,u,a,l=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),b=0,d=void 0===e?h:e>>>0,v=new RegExp(t.source,c+"g");while(r=o.call(v,s)){if(u=v[m],u>b&&(l.push(s.slice(b,r.index)),r[f]>1&&r.index<s[f]&&p.apply(l,r.slice(1)),a=r[0][f],b=u,l[f]>=d))break;v[m]===r.index&&v[m]++}return b===s[f]?!a&&v.test("")||l.push(""):l.push(s.slice(b)),l[f]>d?l.slice(0,d):l}:"0"[d](void 0,0)[f]?function(t,e){return void 0===t&&0===e?[]:i.call(this,t,e)}:i,[function(i,n){var s=t(this),r=void 0==i?void 0:i[e];return void 0!==r?r.call(i,s,n):y.call(String(s),i,n)},function(t,e){var n=c(y,t,this,e,y!==i);if(n.done)return n.value;var o=s(t),p=String(this),d=r(o,RegExp),f=o.unicode,m=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(v?"y":"g"),g=new d(v?o:"^(?:"+o.source+")",m),w=void 0===e?h:e>>>0;if(0===w)return[];if(0===p.length)return null===l(g,p)?[p]:[];var k=0,S=0,x=[];while(S<p.length){g.lastIndex=v?S:0;var T,E=l(g,v?p:p.slice(S));if(null===E||(T=b(a(g.lastIndex+(v?0:S)),p.length))===k)S=u(p,S,f);else{if(x.push(p.slice(k,S)),x.length===w)return x;for(var $=1;$<=E.length-1;$++)if(x.push(E[$]),x.length===w)return x;S=k=T}}return x.push(p.slice(k)),x}]}))},3875:function(t,e,i){},"683b":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{display:"inline-block"}},[i("span",[t._v("subroutine:")]),t._v("\n    \n  "),i("el-select",{attrs:{placeholder:""},on:{change:t.handleSelect},model:{value:t.scriptType.subr,callback:function(e){t.$set(t.scriptType,"subr",e)},expression:"scriptType.subr"}},t._l(t.scriptTypeList,(function(t){return i("el-option",{key:t.subr,attrs:{label:t.name,value:t.subr}})})),1),t._v("\n    \n  "),i("el-button",{attrs:{type:"danger"},on:{click:t.handleDelete}},[t._v("delete")]),i("el-button",{attrs:{type:"primary"},on:{click:t.handleCreate}},[t._v("create")]),i("el-dialog",{attrs:{title:"Create Subroutine",visible:t.dialogVisible},on:{closed:t.handleClose,"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{ref:"subroutineForm",attrs:{model:t.subroutineForm,rules:t.subroutineFormRules,"label-width":"100px"}},[i("el-form-item",{attrs:{prop:"name",label:"name"}},[i("el-input",{model:{value:t.subroutineForm.name,callback:function(e){t.$set(t.subroutineForm,"name",e)},expression:"subroutineForm.name"}})],1),i("el-form-item",{attrs:{prop:"subr",label:"subr"}},[i("el-input",{model:{value:t.subroutineForm.subr,callback:function(e){t.$set(t.subroutineForm,"subr",e)},expression:"subroutineForm.subr"}})],1)],1),i("template",{slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("cancel")]),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("submit")])],1)],2)],1)},s=[],r=(i("6762"),i("7f7f"),i("ac6a"),{props:["value"],data:function(){return{scriptType:null,scriptTypeList:[{name:"Main",subr:-10},{name:"Auto",subr:-20},{name:"Manual",subr:-30}],dialogVisible:!1,subroutineForm:{name:"",subr:""},subroutineFormRules:{name:[{required:!0,message:"",trigger:"blur"}],subr:[{required:!0,message:"",trigger:"blur"}]}}},beforeMount:function(){this.init()},methods:{init:function(){this.$ws().set({success:this.setSubroutineList}).send({func:32})},setSubroutineList:function(t){var e=this;32===t.func&&(this.$ws().remove(this.setSubroutineList),t.rows.forEach((function(t){e.scriptTypeList.some((function(e){return e.subr===t.subr}))||e.scriptTypeList.unshift({subr:t.subr,name:"".concat(t.subr,"     ").concat(t.name)})})))},handleCreate:function(){this.dialogVisible=!0},handleDelete:function(){var t=this;this.$confirm("Are you sure delete this subroutine?","Delete",{type:"warning"}).then((function(){var e=[-10,-20,-30];if(t.scriptType.subr&&!e.includes(t.scriptType.subr)){t.$ws().send({func:35,subr:t.scriptType.subr});var i=t.scriptTypeList.filter((function(i){return e.includes(i.subr)||i.subr!==t.scriptType.subr}));i.length!==t.scriptTypeList.length&&(t.scriptTypeList=i,t.scriptType={name:"",subr:""}),t.$emit("delete")}})).catch((function(){}))},handleClose:function(){this.$refs.subroutineForm.resetFields(),this.subroutineForm={name:"",subr:""}},handleSubmit:function(){var t=this;this.$refs.subroutineForm.validate((function(e){if(!e)return!1;var i=t.subroutineForm,n=i.name,s=i.subr;t.scriptTypeList.some((function(t){return t.subr===s}))||(t.$emit("submit",n,s),t.init(),t.dialogVisible=!1)}))},handleSelect:function(t){if(t){var e=this.scriptTypeList.filter((function(e){return e.subr===t}));this.scriptType={name:e[0].name,subr:e[0].subr},this.$emit("input",this.scriptType)}}},watch:{value:{handler:function(t){this.scriptType=t},immediate:!0}}}),u=r,a=i("2877"),l=Object(a["a"])(u,n,s,!1,null,"203f928a",null);e["default"]=l.exports},"7de8":function(t,e,i){"use strict";i("7f7f"),i("28a5");e["a"]={mounted:function(){document.title=this.$route.name.split("-")[0]}}},d5ce:function(t,e,i){"use strict";var n=i("3875"),s=i.n(n);s.a},f121:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"c",(function(){return s})),i.d(e,"b",(function(){return r})),i.d(e,"d",(function(){return u})),i.d(e,"e",(function(){return a}));var n=[{val:"word"},{val:"uword"},{val:"dword"},{val:"udword"},{val:"float"},{val:"double"},{val:"bit"}],s=[{val:">"},{val:">="},{val:"=="},{val:"<"},{val:"<="},{val:"!="},{val:"&"},{val:"^"},{val:"|"}],r=[{val:"critical"},{val:"alarm"},{val:"warning"},{val:"event"},{val:"view"}],u=[{val:"COMMENT"},{val:"DECLARE"},{val:"INIT"},{val:"DO"},{val:"IF"},{val:"THEN"},{val:"ELSE IF"},{val:"ELSE"},{val:"POS"}],a=[{label:"VIEW(0)",key:0},{label:"OPERATOR(1)",key:1},{label:"FOREMAN(2)",key:2},{label:"MAINENANCE(3)",key:3},{label:"SUPERVISOR(4)",key:4},{label:"ENGINEER(5)",key:5},{label:"DESIGNER(6)",key:6},{label:"MANAGER(7)",key:7}]}}]);
//# sourceMappingURL=chunk-2e95df21.ea821a7b.js.map